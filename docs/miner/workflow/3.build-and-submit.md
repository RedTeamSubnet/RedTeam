---
title: "3. Build and Submit"
tags: [build, submit, docker, commit, publish]
---

# 3. Build and Submit

In this step, you will build your solution into a Docker image, push it to Docker Hub, and obtain the SHA256 digest required for submission.

## Prerequisites

- [**1. Preparation**](./1.preparation.md)
- [**2. Develop Solution**](./2.develop-solution.md)

## 3.1. Build docker image

This step assumes you've already cloned the challenge repository and implemented your solution in the `templates/commit` directory or in your working directory as mentioned in the [previous step](./2.develop-solution.md).

!!! note "Arguments"
    Make sure to replace the placeholders:

    - `<USERNAME>` with your Docker Hub username.
    - `<CHALLENGE_NAME>` with the name of the challenge (e.g., `ab_sniffer`, `ada_detection`, `humanize_behaviour`, etc.).
    - `<VERSION>` with your version tag (e.g., `1.0.0`, `v1`, etc.).

```sh
docker build -t <USERNAME>/<CHALLENGE_NAME>:<VERSION> .
# For example:
docker build -t myuser/ab_sniffer:1.0.0 .
```

## 3.2. Push docker image

### 3.2.1. Create Docker Hub account

Sign up at <https://hub.docker.com>, if you don't have an account yet.

### 3.2.2. Docker Login

You need to login using your Docker Hub credentials before pushing the image:

```sh
docker login
```

### 3.2.3. Push docker image to Docker Hub

```sh
docker push <USERNAME>/<REPO_NAME>:<VERSION>
# For example:
docker push my_username/my_repo:1.0.0
```

### 3.2.4. Get SHA256 digest as commit hash

!!! warning "FOR SUBMISSION"
    Save the SHA256 digest of your pushed docker image, which is required for submission for **miner commit hash**!

```sh
docker inspect --format='{{index .RepoDigests 0}}' <USERNAME>/<REPO_NAME>:<VERSION>
# For example:
docker inspect --format='{{index .RepoDigests 0}}' my_username/my_repo:1.0.0
```

Output:

```sh
my_username/my_repo@sha256:abc123def456...
```

## 3.3. Submit your solution as miner commit

### 3.3.1. Clone miner node repository

```sh
git clone https://github.com/RedTeamSubnet/miner.git && \
    cd miner
```

### 3.3.2. Configure active commit file to submit

!!! danger "IMPORTANT"
    Make sure to change the commit hash with your own pushed docker image **SHA256 digest as commit hash** in the **`active_commit.yaml`** file:

```sh
# Copy template active commit file:
cp -v ./templates/configs/active_commit.yaml ./volumes/configs/agent-miner/active_commit.yaml

# Change active commit file with your own commit hash:
nano ./volumes/configs/agent-miner/active_commit.yaml
```

`active_commit.yaml` format:

```yaml
- <CHALLENGE_NAME>---<USERNAME>/<REPO_NAME>@sha256:<DIGEST>
```

For example:

```yaml
- ab_sniffer_v5---my_username/my_repo@sha256:abc123def456...
- ada_detection_v3---my_username/my_repo@sha256:abc123def456...
```

!!! tip "TIP"
    You can add multiple commits for different challenges in the same `active_commit.yaml` file.

!!! warning "WARNING"
    - Only one commit per challenge is allowed in the `active_commit.yaml` file. If you add multiple commits for the same challenge, only the last one will be considered during submission and others will be ignored.
    - We are allowing only one commit per challenge/day for submission to avoid spam, abuse, unnecessary network load, and fair evaluation for all participants.

### 3.3.3. Configure environment variables

- You need [Bittensor wallet that registered](../../manuals/bittensor/wallet/register.md) on RedTeam Subnet 61.

!!! danger "IMPORTANT"
    Make sure to change the **wallet directory**, **wallet name**, and **hotkey name** variables in the **`.env`** file to match your wallet and hotkey:

    ```sh
    RT_BTCLI_WALLET_DIR="${HOME}/.bittensor/wallets" # !!! CHANGE THIS TO REAL WALLET DIRECTORY !!!
    RT_MINER_WALLET_NAME="miner" # !!! CHANGE THIS TO REAL MINER WALLET NAME !!!
    RT_MINER_HOTKEY_NAME="default" # !!! CHANGE THIS TO REAL MINER HOTKEY NAME !!!
    ```

```sh
# Copy '.env.example' file to '.env' file:
cp -v ./.env.example ./.env

# Edit environment variables to fit in your environment
nano ./.env
```

### 3.3.4. Check docker compose configuration

```sh
## Check docker compose configuration is valid:
./compose.sh validate
# Or:
docker compose config
```

### 3.3.5. Start miner node to submit

```sh
## Start docker compose:
./compose.sh start -l
# Or:
docker compose up -d --remove-orphans --force-recreate && \
    docker compose logs -f --tail 100
```

!!! warning "IMPORTANT"
    - You need to keep the miner node running continuously to submit solutions and earn rewards during the challenge period (at 2 least days).
    - Stopping the miner node could halt submission communications with validators and affect your earnings.

## Next step

- [**4. Monitor and Reward**](./4.monitor-and-reward.md)
